{% extends 'base.html' %}


{% block title %} Meal Analytics {% endblock %}
{% block js %} 
<script src=
  "https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.1/Chart.js">
</script>
{% endblock %}

{% block content %}

<div class="container">
<div class="row col-xs-12">


<h1>Analysis of your Meal Plan</h1>

<input type="button" id="show-all-meals-info" value="All Meals">
<input type="button" id="show-breakfast-info" value="Breakfast">
<input type="button" id="show-lunch-info" value="Lunch">
<input type="button" id="show-dinner-info" value="Dinner">
<input type="button" id="show-snacks-info" value="Snacks">
<br>
<div class="mealplan-chart">
    <p class="week-info">Last 7 Days</p>
    <canvas id="donutChart"></canvas>
    <div id="donutLegend" class="chart-legend"></div>

    <p class="month-info">Last 30 Days</p>
    <canvas id="donutMonthChart"></canvas>
    <div id="donutMonthLegend" class="chart-month-legend"></div>

<div>

</div>
</div>


<script>

    var options = { responsive: true };

    var ctx_donut = $("#donutChart").get(0).getContext("2d");

    $.get("/meal-week-data.json", function (data) {
        var myDonutChart = new Chart(ctx_donut, {
                                                type: 'doughnut',
                                                data: data,
                                                options: options
                                              });
        $('#donutLegend').html(myDonutChart.generateLegend());
    });

    // $("#show-week-info").on("click", showWeekInfo);
    // $("#show-month-info").on("click", showMonthInfo);

    // function showWeekInfo(evt) {
    //     evt.preventDefault();

    //     $.get("/meal-week-data.json", function (data) {
    //     var myDonutChart = new Chart(ctx_donut, {
    //                                             type: 'doughnut',
    //                                             data: data,
    //                                             options: options
    //                                           });
    //     $('#donutLegend').html(myDonutChart.generateLegend());
    //     });
    // }

    var ctx_month_donut = $("#donutMonthChart").get(0).getContext("2d");

    $.get("/meal-month-data.json", function (data) {
        var myDonutChart = new Chart(ctx_month_donut, {
                                            type: 'doughnut',
                                            data: data,
                                            options: options
                                            });
        $('#donutMonthLegend').html(myDonutChart.generateLegend());
        });

    function showMonthInfo(evt) {
        evt.preventDefault();

        $.get("/meal-month-data.json", function (data) {
        var myDonutChart = new Chart(ctx_month_donut, {
                                                type: 'doughnut',
                                                data: data,
                                                options: options
                                              });
        $('#donutLegend').html(myDonutChart.generateLegend());
        });
    }

</script>

{% endblock %}